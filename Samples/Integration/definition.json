{
    "$schema": "../../Source/Schemas/2021-04/schema.definition.json",
    "contentVersion": "1.0.0.0",
    "parameters": {},
    "contexts": {
        "default": {
            "subscriptionId": "{parameters.subscriptionId}",
            "resourceGroupName": "{parameters.resourceGroupName}"
        },
        "sub2": {
            "subscriptionId": "{parameters.subscription2Id}",
            "resourceGroupName": "{parameters.resourceGroup2Name}"
        }
    },
    "definition": {
        "integration": {
            "runners": {
                "vm1": {
                    "vnet": "vnet-1",
                    "subnet": "subnet-1",
                    "sku": "Standard_DS2_v2"
                },
                "vm2": {
                    "vnet": "vnet-1",
                    "subnet": "subnet-2",
                    "sku": "Standard_DS2_v2"
                },
                "vm3": {
                    "vnet": "vnet-2",
                    "subnet": "subnet-1",
                    "sku": "Standard_DS2_v2",
                    "context": "sub2"
                }
            },
            "resourceAccessChecks": [
                {
                    "targetHost": "bing.com",
                    "targetPort": 443,
                    "runFrom": ["vm1", "vm2"]
                },
                {
                    "targetHost": "google.com",
                    "targetPort": 22,
                    "runFrom": ["vm1", "vm2", "vm3"]
                }
            ]
        }
    }
}